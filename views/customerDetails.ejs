<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Detail</title>
    <link rel="stylesheet" href="/css/customers.css">
</head>

<body>
    <h1>Select Customer to See Details</h1>
    <label for="selected">Select to See Details</label>
    <select id="selected" name="selected">
        <% options.forEach(option=> { %>
            <option value="<%=option.id %>">
                <%= option.name %>
            </option>
            <% }) %>

    </select>
    <div id="customerDetails">
        
    </div>

    <a href="/">Go Back</a>
    <script>
        
        document.getElementById('selected').addEventListener('change', function () {
            const customerId = this.value; 

            
            fetch(`/details/${customerId}`)
                .then(response => response.json())
                .then(data => {
                    
                    const customerDetails = document.getElementById('customerDetails');
                    customerDetails.innerHTML = `
                        <h2>Name : ${data.name}</h2>
                        <p>Email: ${data.email}</p>
                        <p>User Id: ${data.id}</p>
                        <p>Balance: ${data.balance}</p>
                    `;
                })
                .catch(error => {
                    console.error('Error fetching customer details:', error);
                });
        });
    </script>
</body>

</html>